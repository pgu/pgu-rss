<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="/css/main.css" rel="stylesheet" type="text/css">
</head>

<body>
    <h1>
        Hello pgu!
    </h1>
    <p>
        <button type="button" onclick="fetchFeed('bbc')">BBC</button>
        <button type="button" onclick="fetchFeed('el_diario')">el_diario</button>
        <button type="button" onclick="fetchFeed('le_monde')">le_monde</button>
    </p>
    <p>
        <div id="feedCard"></div>
    </p>
    <script>
        async function fetchFeed(feedId) {
            const feedCard = document.querySelector('#feedCard');
            feedCard.innerHTML = '...';

            try {
                const response = await fetch(`./api/feeds/${feedId}`);
                if (response.status !== 200) {
                    feedCard.innerHTML = `Looks like there was a problem. Status Code: ${response.status}`;
                } else {
                    const data = await response.json();

                    const widgets = data.map(item => {
                        return `
                        <h2>${item.title}</h2>
                        <p>${item.summary}</p>
                        `;
                    });
                    feedCard.innerHTML = widgets.join('');

                }
            } catch (err) {
                console.log('Fetch Error :-S', err);
                feedCard.innerHTML = '>> Error ' + err;
            }
        }


    </script>

</body>

</html>